<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - XyCloud</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <script src="//cdn.jsdelivr.net/npm/eruda"></script>
    <script>eruda.init();</script>
</head>
<body class="bg-gray-950 text-gray-100 font-['Inter',_sans-serif]">
    <div id="loading-overlay"><svg class="loading-svg" viewBox="25 25 50 50"><circle class="loading-path" cx="50" cy="50" r="20" fill="none" stroke-width="4" stroke-miterlimit="10"/></svg></div>
    <header class="bg-gray-900/80 backdrop-blur-sm text-white p-4 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <a href="index.html" class="flex items-center space-x-3"><svg class="w-12 h-12 text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w.org/2000/svg"><path d="M18.5 15.5C20.9853 15.5 23 13.4853 23 11C23 8.51472 20.9853 6.5 18.5 6.5C18.5 4.01472 16.4853 2 14 2C11.8524 2 10.0513 3.43852 9.61538 5.5C9.01151 5.18688 8.28112 5 7.5 5C5.01472 5 3 7.01472 3 9.5C3 11.5331 4.34629 13.2234 6.13009 13.827C5.23338 14.8013 4.5 16.208 4.5 17.5C4.5 20.2614 6.73858 22.5 9.5 22.5C11.9853 22.5 14 20.4853 14 18C14 17.8546 13.9931 17.711 13.9798 17.5694C15.2223 16.4192 16.8228 15.5 18.5 15.5Z" stroke="#3b82f6" stroke-width="1.5"/><path d="M13 10C13 8.34315 11.6569 7 10 7C8.34315 7 7 8.34315 7 10C7 11.6569 8.34315 13 10 13C11.6569 13 13 11.6569 13 10Z" fill="#3b82f6"/></svg><h1 class="text-3xl font-extrabold text-blue-400">XyCloud</h1></a>
            <nav class="hidden lg:block">
                <ul class="flex space-x-6 text-lg items-center">
                    <li><a href="index.html" class="hover:text-blue-400 transition-colors">Beranda</a></li>
                    <li><a href="paket.html" class="hover:text-blue-400 transition-colors">Paket</a></li>
                    <li><a href="akun-gta.html" class="hover:text-blue-400 transition-colors">Akun GTA</a></li>
                    <li><a href="bantuan.html" class="hover:text-blue-400 transition-colors">Bantuan</a></li>
                    <li id="header-login-button" class="hidden"><a href="login.html" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-5 rounded-full transition-colors">Login</a></li>
                    <li id="header-user-menu" class="relative user-menu"><button class="flex items-center gap-2"><img id="header-user-avatar" src="" class="w-8 h-8 rounded-full"><svg class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></button><div class="settings-dropdown w-48"><a href="dashboard.html" class="dropdown-item">Dashboard</a><a id="admin-panel-link" href="admin.html" class="dropdown-item">Panel Admin</a><button id="header-logout-button" class="dropdown-item text-red-400 w-full text-left">Logout</button></div></li>
                </ul>
            </nav>
            <button id="mobile-menu-toggle" class="lg:hidden text-white focus:outline-none"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg></button>
        </div>
        <nav id="mobile-menu" class="lg:hidden mt-4 hidden"></nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        <div id="admin-auth-check" class="text-center py-20"><svg class="loading-svg mx-auto" viewBox="25 25 50 50"><circle class="loading-path" cx="50" cy="50" r="20" fill="none" stroke-width="4" stroke-miterlimit="10"/></svg><p class="mt-4 text-gray-400">Memeriksa otorisasi...</p></div>
        
        <section id="admin-section" class="hidden">
            <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-8">Admin Panel</h1>
            <div class="mb-8 border-b border-gray-700">
                <nav class="flex flex-wrap -mb-px space-x-8" aria-label="Tabs">
                    <button class="admin-tab active" data-tab="pc-management">Manajemen PC</button>
                    <button class="admin-tab" data-tab="verifications">Verifikasi Akun</button>
                    <button class="admin-tab" data-tab="active-orders">Pesanan Aktif</button>
                    <button class="admin-tab" data-tab="transactions-management">Manajemen Transaksi</button>
                    <button class="admin-tab" data-tab="gta-management">Manajemen Akun GTA</button>
                </nav>
            </div>

            <div id="pc-management" class="admin-tab-content"><div id="pc-management-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div></div>
            <div id="verifications" class="admin-tab-content hidden"><div id="submissions-container" class="space-y-6"></div></div>
            <div id="active-orders" class="admin-tab-content hidden"><div id="active-orders-container" class="space-y-6"></div></div>
            <div id="transactions-management" class="admin-tab-content hidden"><h2 class="text-2xl font-bold text-white mb-6">Kelola Transaksi Pelanggan</h2><div id="transactions-list-container" class="space-y-4"></div></div>
            <div id="gta-management" class="admin-tab-content hidden">
                <h2 class="text-2xl font-bold text-white mb-6">Kelola Akun GTA yang Dijual</h2>
                <form id="gta-account-form" class="bg-gray-800 p-6 rounded-2xl border border-gray-700 mb-8">
                    <input type="hidden" id="gta-account-id">
                    <h3 id="gta-form-title" class="text-xl font-bold text-white mb-4">Tambah Akun Baru</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div><label for="gta-title" class="block mb-2 text-sm font-medium text-gray-300">Judul</label><input type="text" id="gta-title" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg w-full p-2.5" required></div>
                        <div><label for="gta-price" class="block mb-2 text-sm font-medium text-gray-300">Harga (contoh: 25000)</label><input type="number" id="gta-price" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg w-full p-2.5" required></div>
                        <div class="md:col-span-2"><label for="gta-features" class="block mb-2 text-sm font-medium text-gray-300">Fitur (pisahkan dengan koma)</label><textarea id="gta-features" rows="3" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg w-full p-2.5" placeholder="Kepemilikan Penuh, Akses FiveM, -Tidak Termasuk Game GTA V"></textarea></div>
                    </div>
                    <div class="flex gap-4 mt-4">
                        <button type="submit" class="flex-grow bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full">Simpan</button>
                        <button type="button" id="gta-form-cancel" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-full hidden">Batal Edit</button>
                    </div>
                </form>
                <div id="gta-accounts-list" class="space-y-4"></div>
            </div>
        </section>
    </main>

    <div id="pc-status-modal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[999]">
        <div class="bg-gray-800 w-full max-w-md rounded-2xl p-6 border border-gray-700">
            <div class="flex justify-between items-center mb-6"><h3 id="modal-pc-name" class="text-xl font-bold text-white">Ubah Status PC</h3><button id="close-pc-modal-button" class="text-gray-400 hover:text-white">&times;</button></div>
            <form id="pc-status-form">
                <input type="hidden" id="modal-pc-id">
                <div class="space-y-4">
                    <fieldset class="grid grid-cols-3 gap-4">
                        <legend class="sr-only">Status</legend>
                        <div><input type="radio" name="status" value="READY" id="status-ready" class="peer hidden"><label for="status-ready" class="block cursor-pointer rounded-lg border border-gray-600 bg-gray-700 py-2 px-4 text-center text-sm font-medium peer-checked:border-green-500 peer-checked:ring-1 peer-checked:ring-green-500">Ready</label></div>
                        <div><input type="radio" name="status" value="DIGUNAKAN" id="status-digunakan" class="peer hidden"><label for="status-digunakan" class="block cursor-pointer rounded-lg border border-gray-600 bg-gray-700 py-2 px-4 text-center text-sm font-medium peer-checked:border-yellow-500 peer-checked:ring-1 peer-checked:ring-yellow-500">Digunakan</label></div>
                        <div><input type="radio" name="status" value="OFFLINE" id="status-offline" class="peer hidden"><label for="status-offline" class="block cursor-pointer rounded-lg border border-gray-600 bg-gray-700 py-2 px-4 text-center text-sm font-medium peer-checked:border-red-500 peer-checked:ring-1 peer-checked:ring-red-500">Offline</label></div>
                    </fieldset>
                    <div id="user-input-container" class="hidden space-y-4">
                        <div><label for="modal-user-name" class="block mb-2 text-sm font-medium text-gray-300">Nama Pengguna</label><input type="text" id="modal-user-name" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg w-full p-2.5"></div>
                        <div><label for="modal-duration" class="block mb-2 text-sm font-medium text-gray-300">Durasi Sewa (Jam)</label><input type="number" id="modal-duration" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg w-full p-2.5" placeholder="Contoh: 12"></div>
                    </div>
                </div>
                <div class="mt-6"><button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-5 rounded-full">Simpan Perubahan</button></div>
            </form>
        </div>
    </div>
    
    <div id="toast-container"></div>

    <script type="importmap">{ "imports": { "firebase/app": "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js", "firebase/auth": "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js", "firebase/firestore": "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js" } }</script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <script type="module" src="js/config.js"></script>
    <script type="module" src="js/firebase-init.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>